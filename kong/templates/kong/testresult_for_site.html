{% extends "base.html" %}

{% block title %}
Results for {{ results.0.test }}
{% endblock %}

{% block content %}
{% load kong_tags %}
{% with results.0 as result %}
<h1> {{ result.test }} </h1>
{% if result.site.name %}
<h2> {{ result.site.name }} </h2>
{% else %}
<h2> {{ result.site.slug }} </h2>
{% endif %}

<div class="sites">
<div class="site">
    <p>
        <a class="{{ result.succeeded|yesno:"passed,succeeded" }}" title="{{ result.site.url }}">
            <strong>{{ result.succeeded|yesno:"PASSED,FAILED" }}</strong>
            <small>run at {{ result.run_date|date:"g:iA"|lower }}</small>
            <small>Duration (ms) {{ result.duration|micro_to_milli }}</small>
        </a>
    </p>
{% if result.content %}
<div class="test-content">
<strong> Content </strong>
<pre>
{{ result.content }}
</pre>
</div>
{% endif %}
<div class="executed">
<strong> Code Executed </strong>
<pre>
{{ result|render_twill|urlize }}
</pre>
</div>
<center><strong> Duration </strong></center>
<div id="placeholder" style="position:relative; width:640px; height:280px;"> </div>
</div>
</div>


<script type="text/javascript">
$(function () {
        $.plot($("#placeholder"),[{{ flot_list }}], 
            {
                label: '{{ results.0.test }}',
                points: { show: true },
                lines: { show: true },
                xaxis: {
                    mode: "time",
                },
            }
            );
});
</script>

{% comment %}
{% load charts %}
{% chart %}
  {% chart-size "600x400" %}
  {% chart-type "line" %}
  {% chart-title "Duration over time" 18 "cc0000" %}
  {% chart-data duration_list %}
  {% axis "left" %}
    {% axis-range "0" "1" %}
  {% endaxis %}

  {% chart-range-marker "h" "000000" 1 .997 %}
{% endchart %}
{% endcomment %}

{% endwith %}
{% endblock %}

